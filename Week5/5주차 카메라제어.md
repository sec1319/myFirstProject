### 5주차 _1 카메라 제어

#### 카메라 모듈

라즈베리 파이 카메라 모듈은 다음과 같다.

<img src="http://www.3demp.com/3dAdmin/files/community/42/233/20181119114610_61826.jpg" alt="img" style="zoom: 50%;" />

우리가 사용하는 카메라 모듈은  Rev 1.3v 이다. 라즈베리 파이에서는 카메라를 CSI Camera Port에 연결한다. 

* **카메라 모듈을 연결할 때에는 라즈베리 파이의 전원 연결을 끊고 연결한다.**
* 카메라 모듈 끝 부분에 파란색이 검정색 쪽을 보게 연결한다. (연결시 느낌이 난다.)

 <center><img src="http://www.3demp.com/3dAdmin/files/community/42/233/20181119114610_89413.png" alt="img" style="zoom:50%;</center>" />

 

### 카메라 기초 설정

먼저, 터미널을 실행시켜 카메라 설정을 해준다.

```
sudo raspi-config
```

|      |
| ---- |
|      |



### 서킷연결

![1570774932216](C:\Users\MS\AppData\Roaming\Typora\typora-user-images\1570774932216.png)

LED 다리가 짧은 쪽이 Cathode(-)이므로 라즈베리파이의 6번핀(GND)와 연결해주고, 

LED 다리가 긴쪽이 Anode 이므로 GPIO핀 12(wpi - 1)과 연결해준다.



### Switch를 이용한 PWM 제어

dimswitch.c

```c
#include <wiringPi.h>
#include <stdio.h>

#define SW  2      /* GPIO 13 */
#define LED 1      /* GPIO 12 */

int switchControl()
{
   int i;
   int cnt = 1;
   pinMode(SW,  INPUT);                        /* Pin 모드를 입력으로 설정 */
   pinMode(LED, PWM_OUTPUT);                   /* Pin 모드를 PWM_OUTPUT으로 설정 */

   while(1) {
      if(digitalRead(SW) == HIGH) {          /* Push 버튼이 눌러지면(LOW) */
         pwmWrite(LED, cnt*100);                /* LED 밝기 변화 */
         cnt += cnt;                        /* cnt 값 증가 */
	 delay(1000);
      }
   };

   return 0 ;
}

int main(int argc, char** argv)
{
   wiringPiSetup();

   switchControl();                                    /* 스위치 사용을 위한 함수 */

   return 0 ;
}
```

 코드를 빌드하기 위해선 터미널에서 gcc를 이용한다.

```
gcc -o dimswitch dimswitch.c -lwiringPi
```

빌드된 코드를 실행하려면 root 권한이 필요하다. 그러므로 sudo 명령어를 사용하여 코드를 실행하도록 한다.

```
sudo ./dimswitch
```

코드를 실행하고 스위치를 누르면 빛이 점점 강해진다.

> **스위치를 누르면 빛이 약해지는 코드를 짜고, 스위치를 두 개 꽂아 빛이 세지고, 약해지게 만드시오.**



### 서킷연결

![1570778681377](C:\Users\MS\AppData\Roaming\Typora\typora-user-images\1570778681377.png)

